webpackJsonp([1],{"/wAz":function(t,s){},"34Hd":function(t,s){},"7xiL":function(t,s){},"991W":function(t,s){},E4CG:function(t,s){},NHnr:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});i("y+mr");var o=i("3JdW"),n=i.n(o),a=i("7+uW"),e={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"search dis-box"},[s("i",{staticClass:"iconfont fs24 ca icon-sousuo pl-5"}),this._v(" "),s("input",{attrs:{type:"text",placeholder:this.searchMsg}})])},staticRenderFns:[]};var c=i("VU/8")({props:{searchMsg:""},data:function(){return{}}},e,!1,function(t){i("wpej")},"data-v-1507b134",null).exports,r={name:"apphead",props:{poiInfo:{type:Object,default:{}}},components:{SearchBar:c},created:function(){},data:function(){return{ss:"搜索店内商品"}}},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"apphead"},[i("div",{staticClass:"dis-box justify-content-between row"},[i("div",{staticClass:"dis-box flex-1"},[i("i",{staticClass:"iconfont icon-qianjin-copy ce pl-5"}),t._v(" "),i("search-bar",{staticClass:"ml-15 mr-15",attrs:{searchMsg:t.ss}})],1),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"dis-box justify-content-between row"},[i("div",{staticClass:"dis-box"},[i("img",{attrs:{src:t.poiInfo.pic_url,alt:""}}),t._v(" "),i("div",{staticClass:"cf fw-b fs22"},[t._v(t._s(t.poiInfo.name))])]),t._v(" "),t._m(1)]),t._v(" "),t._m(2)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"dis-box mr-10"},[s("div",{staticClass:"cf b mr-10 fs16"},[this._v("拼单")]),this._v(" "),s("span",{staticClass:"iconfont icon-gengduo cf"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"dis-box justify-content-center flex-direction-column mr-10"},[s("i",{staticClass:"iconfont icon-star c-yellow fs24"}),this._v(" "),s("div",{staticClass:"cf fs16 pd-5"},[this._v("收藏")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"dis-box row justify-content-between"},[s("div",{staticClass:"dis-box flex-1"},[s("div",{staticClass:"shouye"},[this._v("首")]),this._v(" "),s("div",{staticClass:"tips over-flow-line-1"},[this._v("新用户立减17元，首次使用美团支付最高再减3元")])]),this._v(" "),s("div",{staticClass:"iconfont icon-qianjin pr-5 fs12"})])}]};var d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"nav"},[i("router-link",{staticClass:"nav_item ",attrs:{to:"/goods"},on:{click:function(s){t.tap(1)}}},[t._v("点餐\n    "),i("div",{staticClass:"line"})]),t._v(" "),i("router-link",{staticClass:"nav_item",attrs:{to:"/ratings"},on:{click:function(s){t.tap(2)}}},[t._v("评价\n    "),i("div",{staticClass:"line"})]),t._v(" "),i("router-link",{staticClass:"nav_item",attrs:{to:"/sellers"},on:{click:function(s){t.tap(3)}}},[t._v("商家\n    "),i("div",{staticClass:"line"})])],1)},staticRenderFns:[]};var u={name:"App",components:{AppHead:i("VU/8")(r,l,!1,function(t){i("7xiL")},"data-v-fd94f1c8",null).exports,AppNav:i("VU/8")({name:"appnav",data:function(){return{left:null,first:null,second:!1,third:!1}},methods:{}},d,!1,function(t){i("E4CG")},null,null).exports},data:function(){return{poiInfo:{}}},created:function(){var t=this;fetch("api/goods").then(function(t){return t.json()}).then(function(s){0==s.code&&(t.poiInfo=s.data.poi_info)})}},v={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-head",{attrs:{poiInfo:this.poiInfo}}),this._v(" "),s("app-nav"),this._v(" "),s("router-view")],1)},staticRenderFns:[]};var f=i("VU/8")(u,v,!1,function(t){i("34Hd")},null,null).exports,p=i("/ocq"),_=(i("991W"),i("Qbok"),i("/wAz"),i("BO1k")),h=i.n(_),m={props:{food:{type:Object}},methods:{decrease:function(){this.food.count--},increase:function(){this.food.count?this.food.count++:a.a.set(this.food,"count",1)}}},C={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"cartcontrol dis-box justify-content-between"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"iconfont icon-jianhao c9 fw-b fs24",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.decrease(s)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"plr-15"},[t._v(t._s(t.food.count))]),t._v(" "),i("i",{staticClass:"iconfont icon-jiahao c-main fw-b fs24",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.increase(s)}}})])},staticRenderFns:[]};var w=i("VU/8")(m,C,!1,function(t){i("qtTK")},null,null).exports,g={components:{"cart-control":w},props:{poi_info:{type:Object,default:{}},selectFoods:{type:Array,default:[]}},computed:{totalCount:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count}),t},totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count*s.min_price}),t},clistShow:function(){return this.totalCount?this.fold:(this.fold=!1,!1)}},methods:{toggle:function(){this.totalCount?this.fold=!this.fold:this.fold=!1},clearCart:function(){this.selectFoods.forEach(function(t){t.count=0})}},data:function(){return{fold:!1}}},b={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shopcart"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.fold,expression:"fold"}],staticClass:"pop",on:{click:t.toggle}}),t._v(" "),i("div",{staticClass:"gouwu dis-box justify-content-center",class:{on:t.totalCount},on:{click:t.toggle}},[i("i",{staticClass:"iconfont icon-gouwuche1 fs26"}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}]},[t._v(t._s(t.totalCount))])]),t._v(" "),i("div",{staticClass:"right dis-box justify-content-between"},[i("div",{staticClass:"pl-50"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.totalPrice,expression:"totalPrice"}],staticClass:"tprice"},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),i("div",{staticClass:"fs12"},[t._v("另需"+t._s(this.poi_info.shipping_fee_tip))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.totalPrice,expression:"!totalPrice"}],staticClass:"fs16 pr-30"},[t._v("￥8元起送")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.totalPrice,expression:"totalPrice"}],staticClass:"jiesuan dis-box justify-content-center flex-direction-column"},[i("span",[t._v("去结算")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.clistShow,expression:"clistShow"}],staticClass:"cartview"},[i("div",{staticClass:"fs12 ta-c bg-main pd-5"},[t._v("新用户立减17元")]),t._v(" "),i("div",{staticClass:"clear dis-box justify-content-between"},[i("div",{staticClass:"tit"},[t._v("1号口袋")]),t._v(" "),i("div",{staticClass:"iconfont icon-lajixiang mr-10 ",on:{click:t.clearCart}},[i("span",{staticClass:"ml-10"},[t._v("清空购物车")])])]),t._v(" "),i("ul",{staticClass:"selfood"},t._l(t.selectFoods,function(s){return i("li",{staticClass:"dis-box justify-content-between"},[i("div",{staticClass:"leftitem"},[i("div",{staticClass:"overflow-line-1"},[t._v(t._s(s.name))])]),t._v(" "),i("div",{staticClass:"dis-box"},[i("div",{staticClass:"pr-50"},[t._v("￥"+t._s(s.min_price))]),t._v(" "),i("cart-control",{staticClass:"pr-10",attrs:{food:s}},[t._v("1")])],1)])}))])])},staticRenderFns:[]};var x=i("VU/8")(g,b,!1,function(t){i("diHj")},null,null).exports,y={props:{food:{type:Object}},components:{CartControl:w},data:function(){return{detail_show:!1}},methods:{showproduct:function(){this.detail_show=!0},close:function(){this.detail_show=!1},increase:function(){a.a.set(this.food,"count",1)}}},j={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("transition",{attrs:{name:"food-detail"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.detail_show,expression:"detail_show"}],staticClass:"prodetail"},[i("div",{staticClass:"imgwrap"},[i("img",{attrs:{src:t.food.picture,alt:""}})]),t._v(" "),i("div",{staticClass:"top dis-box justify-content-between pd-20"},[i("div",{staticClass:"close",on:{click:t.close}},[i("i",{staticClass:"iconfont icon-guanbi1 cf"})]),t._v(" "),i("div",{staticClass:"right disbox"},[i("i",{staticClass:"iconfont icon-zhuanfa"}),t._v(" "),i("i",{staticClass:"iconfont icon-gengduo ml-10"})])]),t._v(" "),i("div",{staticClass:"middle"},[i("div",{staticClass:"fw-b"},[t._v(t._s(t.food.name))]),t._v(" "),i("div",{staticClass:"fs12 c9"},[t._v(t._s(t.food.month_saled_content))]),t._v(" "),i("div",{staticClass:"dis-box justify-content-between pb-0"},[i("div",{staticClass:"c-red fw-b fs26 pt-5"},[t._v("￥"+t._s(t.food.min_price))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!this.food.count,expression:"!this.food.count"}],staticClass:"addproduct iconfont icon-gouwuche1 fs22",on:{click:t.increase}},[i("span",{staticClass:"pl-10 fs16"},[t._v("加入购物车")])]),t._v(" "),i("cart-control",{directives:[{name:"show",rawName:"v-show",value:this.food.count,expression:"this.food.count"}],attrs:{food:t.food}})],1)]),t._v(" "),i("div",{staticClass:"rating"},[i("div",{staticClass:"dis-box justify-content-between bb pb-20"},[i("div",[t._v("外卖好评（好评度"),i("span",{staticClass:"c-red"},[t._v(t._s(t.food.rating.like_ratio))]),t._v("）")]),t._v(" "),i("div",{staticClass:"dis-box"},[i("span",{staticClass:"c9 pr-10"},[t._v(t._s(t.food.rating.comment_count)+"条评论")]),t._v(" "),i("i",{staticClass:"iconfont icon-qianjin c9"})])]),t._v(" "),i("div",{staticClass:"content "},[i("div",{staticClass:"item dis-box  align-items-top ptb-20 bb"},[i("div",{staticClass:"img_wrap"},[i("img",{attrs:{src:"",alt:""}})]),t._v(" "),i("div",{staticClass:"flex-1 pl-10 "},[i("div",{staticClass:"dis-box justify-content-between"},[i("span",[t._v("匿名用户")]),t._v(" "),i("span",[t._v("2018.06.26")])]),t._v(" "),i("div",{staticClass:"pt-10"},[t._v("点的牛奶，到手边牛腩")]),t._v(" "),i("div",{staticClass:"user_food"},[i("img",{attrs:{src:"",alt:""}})])])])])])])])},staticRenderFns:[]};var k={name:"goods",components:{ShopCart:x,CartControl:w,ProductDetail:i("VU/8")(y,j,!1,function(t){i("kksd")},null,null).exports},data:function(){return{zhuanchang:{},zhuanchangList:[],goods:[],listHeight:[],menuScroll:{},foodScroll:{},scrollY:0,poi_info:{},selcetshow:{}}},created:function(){var t=this;fetch("api/goods").then(function(t){return t.json()}).then(function(s){console.log(s),0==s.code&&(t.poi_info=s.data.poi_info,t.zhuanchang=s.data.container_operation_source,t.zhuanchangList=s.data.container_operation_source.operation_source_list,t.goods=s.data.food_spu_tags,console.log(888,t.goods))})},mounted:function(){var t=this;setTimeout(function(){t.$nextTick(function(){t.calculateHeight()})},500)},computed:{currentIndex:function(){for(var t in this.listHeight)if(this.listHeight[t]>this.scrollY&&this.listHeight[t-1]<=this.scrollY)return t-1;return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.spus.forEach(function(s){s.count>0&&t.push(s)})}),t}},methods:{calculateHeight:function(){var t=this.$refs.foodScroll.getElementsByClassName("food-list-dot"),s=0;this.listHeight.push(s);var i=!0,o=!1,n=void 0;try{for(var a,e=h()(t);!(i=(a=e.next()).done);i=!0){s+=a.value.clientHeight,this.listHeight.push(s)}}catch(t){o=!0,n=t}finally{try{!i&&e.return&&e.return()}finally{if(o)throw n}}console.log("listh",this.listHeight)},listScroll:function(){this.scrollY=this.$refs.foodScroll.scrollTop},tap:function(t){this.$refs.foodScroll.getElementsByClassName("food-list-dot")[t].scrollIntoView()},calculateCount:function(t){var s=0;return t.forEach(function(t){t.count>0&&(s+=t.count)}),s},showProduct:function(t){this.$refs.proDetail.showproduct(),this.selcetshow=t}}},E={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"goods dis-box align-items-top"},[i("div",{ref:"menuScroll",staticClass:"leftnav"},[i("ul",[i("li",{on:{click:function(s){t.tap(0)}}},[i("div",{staticClass:"dis-box"},[i("img",{staticClass:"pr-5",attrs:{src:t.zhuanchang.tag_icon}}),t._v(" "),i("div",[t._v(t._s(t.zhuanchang.tag_name))])])]),t._v(" "),t._l(t.goods,function(s,o){return i("li",{key:o,on:{click:function(s){t.tap(o+1)}}},[i("div",{staticClass:"dis-box"},[s.icon?i("img",{attrs:{src:s.icon,alt:""}}):t._e(),t._v(" "),i("div",{staticClass:"overflow-line-2 pl-5"},[t._v(t._s(s.name))])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.calculateCount(s.spus),expression:"calculateCount(it.spus)"}]},[t._v(t._s(t.calculateCount(s.spus)))])])})],2)]),t._v(" "),i("div",{ref:"foodScroll",staticClass:"rightview flex-1",on:{scroll:t.listScroll}},[i("ul",[i("li",{staticClass:"food-list-dot"},t._l(t.zhuanchangList,function(t){return i("div",{staticClass:"topimg zhuanchang_hook"},[i("img",{attrs:{src:t.pic_url}})])})),t._v(" "),t._l(t.goods,function(s){return i("li",{staticClass:"food-list-dot"},[i("div",{staticClass:"pd-10"},[i("span",{staticClass:"tit"},[t._v(t._s(s.name))])]),t._v(" "),t._l(s.spus,function(s){return i("div",{staticClass:"item dis-box",on:{click:function(i){t.showProduct(s)}}},[i("div",{staticClass:"goodsimg"},[i("img",{attrs:{src:s.picture,alt:""}})]),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"ptb-10"},[t._v("月售"+t._s(s.month_saled)+"\r\n\t\t\t\t\t\t\t"),i("span",{staticClass:"pl-15"},[t._v("赞"+t._s(s.praise_num))])]),t._v(" "),i("div",{staticClass:"dis-box justify-content-between pr-5"},[i("div",[t._v("￥"+t._s(s.min_price))]),t._v(" "),i("cart-control",{attrs:{food:s}})],1)])])})],2)})],2)]),t._v(" "),i("ProductDetail",{ref:"proDetail",attrs:{food:t.selcetshow}})],1),t._v(" "),i("shop-cart",{attrs:{poi_info:t.poi_info,selectFoods:t.selectFoods}})],1)},staticRenderFns:[]};var N=i("VU/8")(k,E,!1,function(t){i("gKNY")},"data-v-086ed533",null).exports,F={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ratings"},[this._v("\n\t评价\n")])},staticRenderFns:[]},$=i("VU/8")({name:"ratings",data:function(){return{}}},F,!1,null,null,null).exports,H={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sellers"},[this._v("\n\t商家\n")])},staticRenderFns:[]},P=i("VU/8")({name:"sellers",data:function(){return{}}},H,!1,null,null,null).exports;a.a.config.productionTip=!1,a.a.use(p.a);var S=new p.a({mode:"history",routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:N},{path:"/ratings",component:$},{path:"/sellers",component:P}]});a.a.component(n.a.name,n.a),new a.a({el:"#app",components:{App:f},template:"<App/>",router:S})},Qbok:function(t,s){},diHj:function(t,s){},gKNY:function(t,s){},joTY:function(t,s){},kksd:function(t,s){},qtTK:function(t,s){},wpej:function(t,s){},"y+mr":function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.770f291d74d2f21fadb3.js.map